# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π v2.0

## üéØ –¶–µ–ª—å
–£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö, —Å–æ—Ö—Ä–∞–Ω–∏–≤ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–±–µ–≥–∞—è –ø—Ä–æ–±–ª–µ–º —Å —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–ø–æ–≤ Dart.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏:
1. **Conflicting generic interfaces** - Dart –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. **–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å** - –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –º–µ—Ç–æ–¥–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã
3. **–ú–∏–∫—Å–∏–Ω—ã** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–∏–∫—Å–∏–Ω–æ–≤ —Å –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏

## üìê –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –≤–º–µ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
```dart
// –í–º–µ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–ø–æ–∑–∏—Ü–∏—é
class CompositeHelper<T extends IEntity> {
  final EntityCoreData coreData;
  
  T markAsDeleted<T>(T Function(EntityCoreData) factory) {
    return factory(coreData.copyWith(
      isDeleted: true,
      deletedAt: DateTime.now(),
    ));
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Extension –º–µ—Ç–æ–¥—ã
```dart
// –û–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ extension
extension CompositeExtensions on IEntity {
  bool containsSearchTextBase(String query, List<String> fields) {
    final lowerQuery = query.toLowerCase();
    return fields.any((field) => 
      field.toLowerCase().contains(lowerQuery)
    );
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—Ç–∏–ª–∏—Ç—ã
```dart
// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏
class CompositeUtils {
  static T markAsDeleted<T extends IEntity>(
    T entity,
    T Function(EntityCoreData) rebuild,
  ) {
    // implementation
  }
}
```

## üöÄ –ü–æ—ç—Ç–∞–ø–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫)
1. –°–æ–∑–¥–∞—Ç—å `CompositeUtils` —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
2. –°–æ–∑–¥–∞—Ç—å `ErrorHandler` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
3. –ù–µ —Ç—Ä–æ–≥–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏

### –≠—Ç–∞–ø 2: Extension –º–µ—Ç–æ–¥—ã (—Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫)
1. –°–æ–∑–¥–∞—Ç—å extensions –¥–ª—è `IEntity`, `IDocumentEntity`, `IReferenceEntity`
2. –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–π –º–æ–¥–µ–ª–∏

### –≠—Ç–∞–ø 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥–µ–ª–µ–π (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)
1. –ù–∞—á–∞—Ç—å —Å —Å–∞–º–æ–π –ø—Ä–æ—Å—Ç–æ–π –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, CarModelComposite)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –¥–ª—è –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

## üõ°Ô∏è –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤

1. **–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** - –∏–∑–±–µ–≥–∞—Ç—å BaseCompositeModel —Å –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏
2. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å helper –∫–ª–∞—Å—Å—ã
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —à–∞–≥** - –∑–∞–ø—É—Å–∫–∞—Ç—å flutter analyze –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –Ω–µ –º–µ–Ω—è—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ API

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

- [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `flutter analyze`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- [ ] Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üé® –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ü—Ä–∏–º–µ—Ä —É—Ç–∏–ª–∏—Ç—ã:
```dart
class CompositeUtils {
  /// –ü–æ–º–µ—á–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç—å –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω—É—é
  static T markAsDeleted<T>({
    required EntityCoreData coreData,
    required T Function(EntityCoreData) rebuild,
  }) {
    final now = DateTime.now();
    return rebuild(coreData.copyWith(
      isDeleted: true,
      deletedAt: now,
      modifiedAt: now,
    ));
  }
}
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
```dart
class ClientModelComposite implements IReferenceEntity {
  ClientModelComposite markAsDeleted() {
    return CompositeUtils.markAsDeleted(
      coreData: coreData,
      rebuild: (newCore) => ClientModelComposite._(
        coreData: newCore,
        clientData: clientData,
        // ...
      ),
    );
  }
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–µ –ø—ã—Ç–∞—Ç—å—Å—è —Å–æ–∑–¥–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π BaseCompositeModel** - —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å —Ç–∏–ø–∞–º–∏
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –≤ –º–µ—Ç–æ–¥–∞—Ö** - –∏–∑–±–µ–≥–∞—Ç—å dynamic
3. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ—Å—Ç–æ—Ç—É** - –ª—É—á—à–µ –Ω–µ–º–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —á–µ–º —Å–ª–æ–∂–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –æ–±–Ω–æ–≤–ª—è—Ç—å CLAUDE.md

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. –£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ 20-30%
2. –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞
3. –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
5. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏