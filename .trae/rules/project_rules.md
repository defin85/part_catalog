# Краткая выжимка из проектной документации

Этот документ содержит основные правила и соглашения, принятые в проекте "Part Catalog", основанные на проектной документации.

## 1. Обзор проекта

**Part Catalog** — это приложение для станций технического обслуживания (СТО), предназначенное для управления учетом клиентов, их автомобилей, заказ-нарядов и запчастей.

**Ключевые возможности:**
- Учет клиентов (физические и юридические лица).
- Учет автомобилей клиентов.
- Управление заказ-нарядами.
- Интеграция с каталогами запчастей от поставщиков.
- Получение актуальных цен и сроков доставки запчастей.

## 2. Архитектура

Приложение построено на принципах **Чистой архитектуры** с четким разделением на слои:
- **Presentation:** UI-слой, отвечающий за отображение данных.
- **Domain:** Слой бизнес-логики, содержащий сервисы и репозитории.
- **Data:** Слой доступа к данным, включающий API-клиенты и локальное хранилище.

Модуль для работы с поставщиками поддерживает три режима:
- **Direct:** Прямое подключение к API поставщиков.
- **Proxy:** Работа через прокси-сервер.
- **Hybrid:** Автоматическое переключение между режимами для отказоустойчивости.

## 3. Основные модули

- **Клиенты:** Управление информацией о клиентах.
- **Автомобили:** Управление транспортными средствами клиентов.
- **Заказ-наряды:** Создание и ведение заказ-нарядов.
- **Поставщики:** Интеграция с API поставщиков для получения данных о запчастях.

## 4. Тестирование

Проект использует многоуровневую стратегию тестирования, следуя принципу **пирамиды тестирования**:
- **Unit-тесты (~70%):** Тестирование отдельных функций и классов. Используются `flutter_test`, `mockito`.
- **Widget-тесты (~20%):** Тестирование UI-компонентов и их взаимодействия.
- **Интеграционные тесты (~10%):** Проверка взаимодействия между различными частями приложения. Используется `integration_test`.
- **E2E-тесты:** Ограниченное количество тестов для ключевых пользовательских сценариев.

## 5. Стиль кода

## 6. Гибридная архитектура: 1С и DDD

Приложение использует гибридную архитектуру, сочетающую лучшие практики из 1С и Domain-Driven Design (DDD). Этот подход позволяет объединить привычные для бизнеса концепции 1С с современными методиками проектирования сложных систем.

### Элементы архитектуры 1С

- **Документоцентрический подход**: Основные бизнес-операции оформляются как документы (например, заказ-наряды).
- **Справочники**: Для работы с относительно постоянной информацией (клиенты, автомобили).
- **Регистры**: Для учета движений и состояний (наличие запчастей, статусы заказ-нарядов).

### Элементы Domain-Driven Design (DDD)

- **Предметная область (Domain)**: Выделение бизнес-логики в отдельный слой.
- **Единый язык (Ubiquitous Language)**: Использование общих терминов между разработчиками и экспертами.
- **Агрегаты (Aggregates)**: Для обеспечения целостности данных, реализованные через классы-композиторы.
- **Репозитории (Repositories)**: Для абстрагирования доступа к данным.
- **Сервисы предметной области (Domain Services)**: Для реализации сложной бизнес-логики.

Этот подход обеспечивает понятность для бизнес-пользователей, а также масштабируемость и поддерживаемость системы.